#!/usr/bin/env php_cli
<?php
if (!isset($argv[1])) {
    echo 'Please define an action or use ./bonefish help' . PHP_EOL;
    exit(0);
}

$baseDir = dirname(__FILE__);
$composerAutoload = $baseDir . '/vendor/autoload.php';

if (!file_exists($composerAutoload))
    die('Please run Composer install first!');

require $baseDir . '/vendor/autoload.php';

$container = new Bonefish\DependencyInjection\Container();
/** @var \Bonefish\Core\Mode\CLIMode $cliMode */
$cliMode = $container->create('\Bonefish\Core\Mode\CLIMode');
$cliMode->setParameters(array('basePath' => $baseDir));
$cliMode->init();

$cli = $container->create('\Bonefish\CLI\DrunkenBear',array($argv));
$cli->run();

exit(0);
?>
